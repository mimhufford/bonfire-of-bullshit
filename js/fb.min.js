var Facebook=function(){function getFriends(){getData("/me/friends",function(data){friends=data,BonfireOfBullshit.populateSearch(friends)})}function getPhotos(){getData("/me/photos",function(data){photos=data})}function getStatuses(){getData("/me/tagged",function(data){statuses=data})}function getData(path,callback){var photos=[];FB.api(path,function(response){getPagedItems(photos,response,callback)})}function getPagedItems(data,response,callback){$.each(response.data,function(index,item){data.push(item)}),response.paging&&response.paging.next?$.getJSON(response.paging.next,function(response){getPagedItems(data,response,callback)}):callback(data)}var friends,photos,statuses,my={};return my.init=function(){window.fbAsyncInit=function(){FB.init({appId:"274830309223357",status:!0,cookie:!0,xfbml:!0}),FB.Event.subscribe("auth.authResponseChange",function(response){"connected"===response.status&&(BonfireOfBullshit.connected(),getFriends(),getPhotos(),getStatuses())})},function(d){var js,id="facebook-jssdk",ref=d.getElementsByTagName("script")[0];d.getElementById(id)||(js=d.createElement("script"),js.id=id,js.async=!0,js.src="//connect.facebook.net/en_US/all.js",ref.parentNode.insertBefore(js,ref))}(document)},my.getPhotosContaining=function(friendID){var photosOfBoth=[];return $.each(photos,function(index,photo){$.each(photo.tags.data,function(index,tag){return tag.id===friendID?(photosOfBoth.push(photo.source),!1):void 0})}),photosOfBoth},my.getStatusesContaining=function(friendID){var statusesWithBoth=[];return $.each(statuses,function(index,status){status.from.id===friendID?statusesWithBoth.push(status.message||status.story):status.with_tags&&$.each(status.with_tags.data,function(index,tagged){return tagged.id===friendID?(statusesWithBoth.push(status.message||status.story),!1):void 0})}),statusesWithBoth},my}();